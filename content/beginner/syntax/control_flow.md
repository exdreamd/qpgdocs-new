---
title: 控制流
date: 2024-08-18T16:41:35+08:00
draft: false
weight: 56
---

程序的执行就像航海，需要明确的航线和灵活的转向机制才能到达目的地。在 Python 中，**控制流语句** 就扮演着这样的角色，它们引导程序的执行路径，根据不同的条件和逻辑，选择不同的代码分支，实现多样化的程序行为。本章节将深入探讨 Python 的三大控制流语句：`if`、`while` 和 `for`，以及 `break` 和 `continue` 语句，帮助你掌握掌控程序流程的精髓。

## `if` 语句

`if` 语句是程序中最基本的决策机制，它根据条件的真假来选择执行不同的代码块。就像一个岔路口，根据不同的情况指引你走向不同的道路。

### `if-else` 结构

`if-else` 结构是 `if` 语句最常见的形式，它提供了两种执行路径：

- **如果条件为真：** 执行 `if` 代码块，就像你选择了岔路口的左边。
- **如果条件为假：** 执行 `else` 代码块，就像你选择了岔路口的右边。

```python
age = 20

if age >= 18:
    print("您已成年。")
else:
    print("您未成年。")
```

运行这段代码，由于 `age` 的值为 20，大于等于 18，所以条件为真，程序会执行 `if` 代码块，输出结果为：

```
您已成年。
```

如果将 `age` 的值修改为 16，则条件为假，程序会执行 `else` 代码块，输出结果为：

```
您未成年。
```

### `if-elif-else` 结构

当需要进行多重选择时，可以使用 `if-elif-else` 结构。它允许你检查多个条件，并根据第一个为真的条件执行相应的代码块，就像一个多岔路口，可以根据不同的情况选择不同的方向。

```python
score = 85

if score >= 90:
    print("优秀")
elif score >= 80:
    print("良好")
elif score >= 70:
    print("中等")
elif score >= 60:
    print("及格")
else:
    print("不及格")
```

运行这段代码，由于 `score` 的值为 85，满足第二个条件 `score >= 80`，程序会执行第二个代码块，输出结果为：

```
良好
```

如果将 `score` 的值修改为 55，则程序会执行最后一个代码块，输出结果为：

```
不及格
```

### 嵌套的 `if` 语句

你可以在 `if` 代码块中嵌套另一个 `if` 语句，以实现更复杂的逻辑判断，就像在一个岔路口，又遇到了另一个岔路口，需要进行多层决策。

```python
age = 20
has_driver_license = False

if age >= 18:
    if has_driver_license:
        print("您可以驾驶汽车。")
    else:
        print("您已成年，但需要考取驾照才能驾驶汽车。")
else:
    print("您未成年，不能驾驶汽车。")
```

运行这段代码，由于 `age` 大于等于 18，且 `has_driver_license` 为 `False`，所以程序会执行外层 `if` 代码块中的 `else` 代码块，输出结果为：

```
您已成年，但需要考取驾照才能驾驶汽车。
```

### 注意事项

- 每个 `if`、`elif` 和 `else` 后面都要加冒号 `:`，表示接下来是一个代码块。
- 代码块需要缩进，通常使用四个空格，以清晰地标识代码块的层次结构。
- `elif` 和 `else` 部分都是可选的，可以根据实际需求选择是否使用。

## `while` 循环

`while` 循环用于在满足特定条件的情况下重复执行一段代码，直到条件不再满足为止。

### 循环结构

```python
while 条件:
    # 循环体，当条件为真时重复执行
```

**示例：**

```python
count = 0
while count < 5:
    print(count)
    count += 1
```

运行这段代码，会输出以下结果：

```
0
1
2
3
4
```

程序会首先检查循环条件 `count < 5` 是否为真。由于 `count` 的初始值为 0，小于 5，所以条件为真，执行循环体，输出 `count` 的值，并将 `count` 的值加 1。然后，程序再次检查循环条件，重复执行循环体，直到 `count` 的值达到 5，条件不再满足，循环结束。

### `else` 子句

`while` 循环可以包含一个可选的 `else` 子句，当循环条件不再满足时执行。

```python
count = 0
while count < 5:
    print(count)
    count += 1
else:
    print("循环结束")
```

运行这段代码，会输出以下结果：

```
0
1
2
3
4
循环结束
```

与之前的例子相比，这次在循环结束后，输出了一句 "循环结束"。

### `break` 语句

`break` 语句可以立即终止循环的执行，即使循环条件仍然满足。

```python
while True:
    user_input = input("请输入一个数字 (或输入 'q' 退出): ")
    if user_input == 'q':
        break
    number = int(user_input)
    print(f"{number} 的平方是 {number ** 2}")
```

这个例子中，循环会一直执行，直到用户输入 'q' 为止。`break` 语句就像一个紧急按钮，可以让你随时跳出循环。

### `continue` 语句

`continue` 语句可以跳过当前循环迭代的剩余代码，直接进入下一次循环迭代。

```python
count = 0
while count < 10:
    count += 1
    if count % 2 == 0:  # 如果 count 是偶数，则跳过本次循环
        continue
    print(count)  # 只打印奇数
```

运行这段代码，会输出以下结果：

```
1
3
5
7
9
```

在这个例子中，循环会输出 1 到 9 之间的所有奇数。当 `count` 是偶数时，`continue` 语句会跳过 `print(count)` 这行代码，直接进入下一次循环迭代。

## `for` 循环

`for` 循环用于遍历序列（例如列表、元组、字符串等）中的每个元素，并对每个元素执行相同的操作。

### 循环结构

```python
for 元素 in 序列:
    # 循环体，对每个元素执行相同的操作
```

**示例：**

```python
names = ["Alice", "Bob", "Charlie"]
for name in names:
    print(f"Hello, {name}!")
```

运行这段代码，会输出以下结果：

```
Hello, Alice!
Hello, Bob!
Hello, Charlie!
```

这段代码会遍历 `names` 列表中的每个元素，并将 `name` 变量依次设置为列表中的每个名字，然后输出一句问候语。

### `range()` 函数

`range()` 函数可以生成一个数字序列，通常用于 `for` 循环中，让你可以方便地控制循环的次数。

```python
for i in range(5):  # 生成 0 到 4 的数字序列
    print(i)
```

运行这段代码，会输出以下结果：

```
0
1
2
3
4
```

### `else` 子句

`for` 循环也可以包含一个可选的 `else` 子句，当循环正常结束（没有遇到 `break` 语句）时执行，就像你欣赏完所有礼物后，可以去做其他事情。

```python
for i in range(5):
    print(i)
else:
    print("循环结束")
```

运行这段代码，会输出以下结果：

```
0
1
2
3
4
循环结束
```

### `break` 和 `continue` 语句

与 `while` 循环一样，`for` 循环也可以使用 `break` 和 `continue` 语句来控制循环流程，让你可以根据需要提前跳出循环或跳过当前循环迭代。

## 总结

控制流语句是 Python 编程的基石，它们赋予了程序根据不同条件和逻辑执行不同操作的能力。`if` 语句用于决策，`while` 循环用于重复执行，`for` 循环用于遍历序列，而 `break` 和 `continue` 语句则提供了更精细的循环控制。熟练掌握这些控制流语句，你将能够编写更加灵活、强大、富有表现力的 Python 程序。
